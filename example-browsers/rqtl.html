<!DOCTYPE html> 

<html>

    <head>

        <style>
        </style>

        <title>R/QTL :: Dalliance</title> 
        <script language="javascript" src="../build/dalliance-all.js"></script>

        <script language="javascript">
         var ironControl = {
             "crosstype": "f2",
             // TODO: these should point to relative URIs
             "geno": "http://localhost:8000/iron_geno.csv",
             "pheno": "iron_pheno.csv",
             "phenocovar": "iron_phenocovar.csv",
             "covar": "iron_covar.csv",
             "gmap": "http://localhost:8000/iron_gmap.csv",
             "pmap": "iron_pmap.csv",
             "alleles": [
                 "S",
                 "B"
             ],
             "genotypes": {
                 "SS": 1,
                 "SB": 2,
                 "BB": 3
             },
             "sex": {
                 "covar": "sex",
                 "f": "female",
                 "m": "male"
             },
             "cross_info": {
                 "covar": "cross_direction",
                 "(SxB)x(SxB)": 0,
                 "(BxS)x(BxS)": 1
             },
             "x_chr": "X",
             "na.strings": [
                 "-",
                 "NA"
             ]
         };
         var b = new Browser({
             chr:          '3',
             viewStart:    2000000,
             viewEnd:      55000000,
             cookieKey:    'rqtl',

             coordSystem: {
                 speciesName: 'Mouse',
                 taxon: 10090,
                 auth: 'GRCm',
                 version: 38,
                 ucscName: 'mm10'
             },

             /*
             chains: {
                 mm9ToMm10: new Chainset('http://www.derkholm.net:8080/das/mm9ToMm10/', 'NCBIM37', 'GRCm38',
                                         {
                                             speciesName: 'Mouse',
                                             taxon: 10090,
                                             auth: 'NCBIM',
                                             version: 37,
                                             ucscName: 'mm9'
                                         })
             },
             */

             sources:
             [
                 {name: 'Genome',
                  twoBitURI:  'http://www.biodalliance.org/datasets/GRCm38/mm10.2bit',
                  desc: 'Mouse reference genome build GRCm38',
                  tier_type: 'sequence',
                  provides_entrypoints: true
                 },
                 {name:                 'Genemap',
                  control: ironControl,
                  //uri:                  'http://localhost:8000/iron_gmap.csv',
                  gmapUri:                  'http://localhost:8000/iron_gmap.csv',
                  genoUri:                  'http://localhost:8000/iron_geno.csv',
                  tier_type:            'rqtl',
                  pinned: true
                 },
                 /*{
                    name: 'dummy genes',
                    twoBitURI:            'http://www.biodalliance.org/datasets/hg19.2bit',
                    tier_type:            'seq',
                    provides_entrypoints: true,
                    pinned: true
                    },*/
                 /*             {name: 'GENCODE',
                    bwgURI: 'http://www.biodalliance.org/datasets/gencode.bb',
                    stylesheet_uri: 'http://www.biodalliance.org/stylesheets/gencode.xml',
                    collapseSuperGroups: true,
                    trixURI: 'http://www.biodalliance.org/datasets/geneIndex.ix'},*/
             ],

             setDocumentTitle: true,
             uiPrefix: '../',
             maxWorkers: 0,

             fullScreen: true

         });

         b.addFeatureInfoPlugin(function(f, info) {
             info.add("id", f.id);
             info.add("genotype", f.genotype);
         });

        </script>
    </head>

    <body>
        <div id='svgHolder'>Failed to load the Biodalliance genome browser.  Have you run "gulp"?</div>
    </body>
</html>

